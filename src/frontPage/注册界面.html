<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="indexx.css">
    <title>注册desuwa</title>
</head>
<body>
<div class="box">
    <div class="left"></div>
    <div class="right">
        <h4>注 册</h4>
        <form id="register-form" action=" http://localhost:8089/user/register" method="POST">
            <input class = "acc" type="text" name="username" placeholder="用户名">
            <input class = "acc" type="password" name="password" placeholder="密码">
            <input class = "submit" type="submit" value="Sign in">
        </form>
        <div class="fn">
<!--            <a href="http://localhost:63342/LUTstudentManamentSystem/studentGradeManagmentSystem/src/frontPage/%E7%99%BB%E9%99%86%E7%95%8C%E9%9D%A2.html?_ijt=tf3eav9b4mmt1orerk3u9gisj6&_ij_reload=RELOAD_ON_SAVE;">返回登录</a>-->
            <form action="登陆界面.html">
                <button onclick="location.href='登陆界面.html'" href="javascript:;">返回登陆</button>
            </form>
            <a href="javascript:;">找回密码</a>
        </div>

    </div>
</div>

</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('register-form');
        if (!form) return;
        form.addEventListener('submit', async function (e) {
            e.preventDefault();
            const formData = new FormData(form);
            const payload = {
                username: (formData.get('username') || '').trim(),
                password: (formData.get('password') || '').trim()
                // 可按需增加: role: 'student'
            };
            if (!payload.username || !payload.password) {
                alert('用户名和密码不能为空');
                return;
            }
            const url = (form.getAttribute('action') || '').trim() || 'http://localhost:8089/user/register';
            try {
                const resp = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const text = await resp.text();
                alert(text || '提交成功');
            } catch (err) {
                console.error(err);
                alert('请求失败，请稍后重试');
            }
        });
    });
</script>
</html>